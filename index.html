<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®±åº­å…¥å¤¢ | è§’è‰²è¡£è£æ‰¹ç™¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dream-bg': '#f3f4f6', // èƒŒæ™¯ç°ç™½
                        'dream-card': '#ffffff', // å¡ç‰‡ç™½
                        'dream-accent': '#8b5cf6', // å¤¢å¹»ç´«
                        'dream-text': '#4b5563', // æ·±ç°å­—
                    },
                    fontFamily: {
                        sans: ['"Helvetica Neue"', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* å¢åŠ ä¸€é»æ·¡å…¥å‹•ç•« */
        .fade-in { animation: fadeIn 0.8s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* æ¯›ç»ç’ƒæ•ˆæœ */
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen flex items-center justify-center p-4">

    <div class="max-w-lg w-full fade-in relative">
        
        <div class="text-center mb-8">
            <h1 class="text-3xl font-light tracking-widest text-gray-800 mb-2">HAKONIWA</h1>
            <p class="text-sm text-gray-500 tracking-widest">ç®±åº­å…¥å¤¢ Â· æ•¸ä½æ‰¹ç™¼éƒ¨</p>
        </div>

        <div class="glass shadow-xl rounded-2xl p-8 border border-white/50">
            <form id="orderForm" class="space-y-6">
                
                <input type="text" name="honeypot" style="display:none" tabindex="-1" autocomplete="off">

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Buyer Name</label>
                    <input type="text" name="name" required placeholder="è«‹è¼¸å…¥æ‚¨çš„ç¨±å‘¼" 
                        class="w-full bg-gray-50 border-b-2 border-gray-200 focus:border-dream-accent px-3 py-2 outline-none transition-colors">
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Email Address</label>
                    <input type="email" name="email" required placeholder="æ¥æ”¶æª”æ¡ˆç”¨" 
                        class="w-full bg-gray-50 border-b-2 border-gray-200 focus:border-dream-accent px-3 py-2 outline-none transition-colors">
                    <p class="text-xs text-gray-400 mt-1">* ä¸‹å–®å¾Œç³»çµ±å°‡è‡ªå‹•ç™¼é€æ•¸ä½é€£çµè‡³æ­¤ä¿¡ç®±</p>
                </div>

                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Select Item</label>
                    <div class="relative">
                        <select name="product" required 
                            class="w-full bg-gray-50 border border-gray-200 rounded px-3 py-3 appearance-none focus:border-dream-accent outline-none">
                            <option value="" disabled selected>è«‹é¸æ“‡æœè£å¥—çµ„...</option>
                            <option value="OC_SET_A">ğŸ¥€ å“¥å¾·è˜¿è‰å¥—è£ (æ•¸ä½ç‰ˆ)</option>
                            <option value="OC_SET_B">ğŸª æœªä¾†è³½åšå¥—è£ (æ•¸ä½ç‰ˆ)</option>
                            <option value="OC_SET_C">ğŸ¦‹ æ£®ä¹‹ç²¾éˆå¥—è£ (æ•¸ä½ç‰ˆ)</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                </div>

                <div class="flex gap-4">
                    <div class="w-1/2">
                        <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Amount</label>
                        <input type="text" name="quantity" required placeholder="é‡‘é¡" 
                            class="w-full bg-gray-50 border-b-2 border-gray-200 focus:border-dream-accent px-3 py-2 outline-none transition-colors">
                    </div>
                    <div class="w-1/2">
                         <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Last 5 Digits</label>
                         <input type="text" name="account" required placeholder="å¸³è™Ÿå¾Œäº”ç¢¼" 
                            class="w-full bg-gray-50 border-b-2 border-gray-200 focus:border-dream-accent px-3 py-2 outline-none transition-colors">
                    </div>
                </div>

                <button type="submit" id="submitBtn"
                    class="w-full bg-gray-800 text-white font-medium py-3 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-[1.02] shadow-lg">
                    ç¢ºèªé€å‡ºè¨‚å–®
                </button>
            </form>

            <div id="successMsg" class="hidden text-center mt-6">
                <div class="text-4xl mb-2">âœ¨</div>
                <h3 class="text-lg font-bold text-gray-700">è¨‚å–®å·²é€å‡º</h3>
                <p class="text-sm text-gray-500">è«‹éœå€™ç®¡ç†å“¡æ ¸å‡†ï¼Œæª”æ¡ˆå°‡æœƒè‡ªå‹•å¯„å‡ºã€‚</p>
                <button onclick="location.reload()" class="mt-4 text-xs text-dream-accent underline">å†ä¸‹ä¸€å–®</button>
            </div>
        </div>

        <div class="text-center mt-8 text-xs text-gray-400">
            &copy; 2024 Hakoniwa Studio. All rights reserved.
        </div>
    </div>

    <script>
        // ğŸ‘‡ğŸ‘‡ğŸ‘‡ è«‹æŠŠé€™è£¡æ›æˆä½ å‰›å‰›éƒ¨ç½²æ‹¿åˆ°çš„ GAS ç¶²å€ ğŸ‘‡ğŸ‘‡ğŸ‘‡
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzBZjTBh6MqsPMczBUgnqg-wcPJSoFXtQcd_0PxZNzVJJQhPb3LuLdgRqWi7qbcnagR/exec'; 

        const form = document.getElementById('orderForm');
        const btn = document.getElementById('submitBtn');
        const successMsg = document.getElementById('successMsg');

        form.addEventListener('submit', e => {
            e.preventDefault();
            
            // UI é–å®š
            btn.disabled = true;
            btn.innerHTML = '<span class="animate-pulse">å‚³é€ä¸­...</span>';
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            let formData = new FormData(form);
            let object = {};
            formData.forEach((value, key) => object[key] = value);
            
            // ç™¼é€è«‹æ±‚
            fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify(object),
                headers: { "Content-Type": "text/plain;charset=utf-8" } // é¿é–‹ CORS æª¢æŸ¥
            })
            .then(res => res.json())
            .then(data => {
                if(data.result === "success"){
                    // æˆåŠŸï¼šéš±è—è¡¨å–®ï¼Œé¡¯ç¤ºæˆåŠŸè¨Šæ¯
                    form.style.display = 'none';
                    successMsg.classList.remove('hidden');
                    successMsg.classList.add('fade-in');
                } else {
                    alert('ç³»çµ±éŒ¯èª¤ï¼š' + (data.msg || 'æœªçŸ¥éŒ¯èª¤'));
                    resetBtn();
                }
            })
            .catch(err => {
                console.error(err);
                alert('é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–ç¨å¾Œå†è©¦ã€‚');
                resetBtn();
            });
        });

        function resetBtn(){
            btn.disabled = false;
            btn.innerHTML = 'ç¢ºèªé€å‡ºè¨‚å–®';
            btn.classList.remove('opacity-50', 'cursor-not-allowed');
        }
    </script>
</body>
</html>
